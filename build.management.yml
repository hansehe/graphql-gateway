env_files: 
    - version.env

run:
    selections:
        service:
            cmd:
                - python DumpLocalhostIP.py
            files:
                - docker-compose.yml

build:
    selections:
        service:
            additionalTag: latest
            files:
                - docker-compose.yml
        helm:
            directory: helm
            cmd: 
                - helm template graphql-gateway

publish:
    selections:
        service:
            additionalTag: latest
            files:
                - docker-compose.yml
        helm:
            directory: helm
            cmd: 
                - helm template graphql-gateway
                - helm package graphql-gateway --destination charts --app-version ${VERSION}
                - helm repo index ./charts
